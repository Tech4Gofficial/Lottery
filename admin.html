<!DOCTYPE html>
<html>
<head>
<title>Admin Aviator</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
<h2>Admin Control</h2>

<input type="number" id="crash" step="0.01" placeholder="Crash At">
<button onclick="setCrash()">Set Crash</button>

<p>Countdown: <span id="cd">10</span></p>
<button onclick="startCountdown()">Start Countdown</button>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="firebase.js"></script>

<script>
let countdownInterval = null;

function setCrash(){
  firebase.database().ref("admin/crashAt")
    .set(Number(document.getElementById("crash").value));
}

function startCountdown(){
  let cd = 10;
  firebase.database().ref("admin").update({
    status:"waiting",
    countdown:cd
  });

  clearInterval(countdownInterval);
  countdownInterval = setInterval(()=>{
    cd--;
    firebase.database().ref("admin/countdown").set(cd);

    if(cd <= 0){
      clearInterval(countdownInterval);
      firebase.database().ref("admin").update({
        status:"flying"
      });
    }
  },1000);
}
</script>
</body>
</html>
