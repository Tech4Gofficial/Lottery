<!DOCTYPE html>
<html>
<head>
<title>Admin Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>ðŸ›  Admin Dashboard</h2>

  <p>Crash At (x)</p>
  <input type="number" step="0.01" id="crash">

  <p>Round Countdown (seconds)</p>
  <input type="number" id="countdown" value="10">

  <button onclick="startRound()">Start New Round</button>
  <button onclick="forceCrash()">Force Crash</button>

  <p id="status"></p>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="firebase.js"></script>

<script>
const adminRef = firebase.database().ref("admin");

function startRound(){
  const crashAt = Number(document.getElementById("crash").value);
  const cd = Number(document.getElementById("countdown").value);

  if(crashAt <= 1 || cd <= 0){
    alert("Invalid values");
    return;
  }

  adminRef.set({
    crashAt: crashAt,
    round: {
      status: "waiting",
      countdown: cd,
      roundId: Date.now()
    }
  });

  document.getElementById("status").innerText =
    "âœ… New round scheduled";
}

function forceCrash(){
  adminRef.child("round/status").set("crashed");
  document.getElementById("status").innerText =
    "ðŸ’¥ Forced crash";
}
</script>

</body>
</html>
