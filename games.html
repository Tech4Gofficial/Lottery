<!DOCTYPE html>
<html>
<head>
<title>Games</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
<h2>ğŸ® Casino Games</h2>

<p>Balance: â‚¹<span id="bal">0</span></p>

<a class="game-link" href="mines.html">ğŸ’£ Mines</a>
<a class="game-link" href="colorbet.html">ğŸ¨ Color Bet</a>
<a class="game-link" href="aviator.html">âœˆï¸ Aviator</a>

<button onclick="logout()">Logout</button>
</div>

<script src="firebase.js"></script>
<script>
let uid;
firebase.auth().onAuthStateChanged(user => {
  if(!user) location.href="index.html";
  uid = user.uid;

  const userRef = firebase.database().ref("users/"+uid);

  // Initialize balance if not exist
  userRef.child("balance").get().then(snap=>{
    if(!snap.exists()){
      userRef.set({balance: 1000}); // starting balance
    }
  });

  // Display balance
  userRef.child("balance").on("value", snap=>{
    let val = snap.val();
    bal.innerText = val !== null ? val : 0;
  });
});

function logout(){
  firebase.auth().signOut();
  location.href="index.html";
}
</script>
</body>
</html>
