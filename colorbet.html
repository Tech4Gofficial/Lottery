<!DOCTYPE html>
<html>
<body>

<h2>ğŸ¨ Color Bet</h2>
<p>Balance: â‚¹<span id="bal">0</span></p>

<input id="bet" type="number" placeholder="Bet amount"><br><br>
<button onclick="play('red')">ğŸ”´ Red (2x)</button>
<button onclick="play('green')">ğŸŸ¢ Green (2x)</button>
<button onclick="play('violet')">ğŸŸ£ Violet (5x)</button>

<p id="res"></p>
<a href="games.html">â¬… Back</a>

<script src="firebase.js"></script>
<script>
let uid;

firebase.auth().onAuthStateChanged(u=>{
  uid=u.uid;
  firebase.database().ref("users/"+uid+"/balance")
    .on("value", s=>bal.innerText=s.val());
});

function play(choice){
  let betAmt = Number(bet.value);
  let colors = ["red","green","violet","red","green"];
  let result = colors[Math.floor(Math.random()*5)];

  let ref = firebase.database().ref("users/"+uid+"/balance");
  ref.once("value", s=>{
    let bal = s.val();
    if(bal < betAmt) return alert("Low balance");

    if(choice === result){
      let win = choice==="violet" ? betAmt*5 : betAmt*2;
      ref.set(bal + win);
      res.innerText="ğŸ‰ "+result+" WIN â‚¹"+win;
    } else {
      ref.set(bal - betAmt);
      res.innerText="âŒ Result: "+result;
    }
  });
}
</script>

</body>
</html>
