<!DOCTYPE html>
<html>
<head>
<title>Color Bet</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
<h2>ðŸŽ¨ Color Bet</h2>
<p class="balance">Balance â‚¹<span id="bal">0</span></p>

<input id="bet" type="number" placeholder="Bet Amount"><br>

<button class="red" onclick="play('red')">Red (2x)</button>
<button class="green" onclick="play('green')">Green (2x)</button>
<button class="violet" onclick="play('violet')">Violet (5x)</button>

<p id="res"></p>
<a href="games.html">â¬… Back</a>
</div>

<script src="firebase.js"></script>
<script>
let uid;
firebase.auth().onAuthStateChanged(u=>{
 uid=u.uid;
 firebase.database().ref("users/"+uid+"/balance")
 .on("value",s=>bal.innerText=s.val());
});

function play(c){
 let b=Number(bet.value);
 let r=["red","green","violet","red","green"][Math.floor(Math.random()*5)];
 let ref=firebase.database().ref("users/"+uid+"/balance");
 ref.once("value",s=>{
  let bal=s.val();
  if(bal<b) return alert("Low balance");
  if(c===r){
   let win=c==="violet"?b*5:b*2;
   ref.set(bal+win);
   res.innerText="ðŸŽ‰ "+r+" WON â‚¹"+win;
  }else{
   ref.set(bal-b);
   res.innerText="âŒ Result "+r;
  }
 });
}
</script>

</body>
</html>
